<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<script>
    function getSubList(obj){
        /* 서버에 요청 get/post */
        /*
        // js 스크립트는 보안이 불가(html 소스와 함께 작성되므로, 소스보기에서 원본 소스가 노출)
        // 그래서 서버를 다루는 node.js, jsp, asp, php 등을 이용하는 것이다.
        var sql = "SELECT * FROM animal WHERE category_id = 2";
        var mysql = require("mysql");
        var con = mysql.createServer({
            url: "localhost",
            user: "root",
            password: "1234", 
            database: "node",
        });
        con.query(sql);
        */

        //var sel1 = document.getElementsByName("category_id")[0];
        location.href = "/animal?category_id=" + obj.value;
        
    }
</script>
서버에서 다시 넘겨받은 category_id는 <%=category_id%>
<body>
    <select name="category_id" onChange="getSubList(this)">
        <option value="0">동물 구분</option>
        <%for(var i=0; i<categoryArray.length;i++){%>
        <%var category = categoryArray[i];%>
        <option <%if(category_id==category.category_id){%>selected<%}%> value="<%=category.category_id%>"><%=category.category_name%></option>
        <%}%>
    </select>

    <select name="animal_id">
        <%for(var i=0; i<animalArray.length; i++){%>
        <%var animal = animalArray[i];%>
        <option value="<%=animal.animal_id%>"><%=animal.name%></option>
        <%}%>

    </select>

</body>
</html>